<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>图片懒加载</title>
      <script src="https://cdn.bootcss.com/jquery/3.2.0/jquery.js"></script>
      <style media="screen">
       .container {
         margin: 0 auto;
         max-width: 420px;
         display: flex;
         flex-flow: row wrap;
         justify-content: flex-start;
       }
       .container img{
         width: 200px;
         height: 200px;
         display: block;
         border: 1px solid;
       }
      </style>
  </head>
  <body>
    <div class="container">

        <img src="https://dummyimage.com/200X200"
         data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic1"
         alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


        <img src="https://dummyimage.com/200X200"
        data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic2"
         alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


        <img src="https://dummyimage.com/200X200"
        data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic3"
        alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


        <img src="https://dummyimage.com/200X200"
        data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic4"
        alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


        <img src="https://dummyimage.com/200X200"
        data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic5"
        alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


        <img src="https://dummyimage.com/200X200"
        data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic6"
        alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


        <img src="https://dummyimage.com/200X200"
        data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic7"
        alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


        <img src="https://dummyimage.com/200X200"
        data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic8"
        alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


        <img src="https://dummyimage.com/200X200"
        data-src="https://dummyimage.com/200X200/fff/000000.png&text=pic9"
        alt="https://dummyimage.com/200X200/fff/000000.png&text=loading"/>


    </div>
    <script type="text/javascript">

    lazyRender()

    var clock;
    $(window).on('scroll',function(){
        if(clock){
            clearTimeout(clock)
        }
        clock = setTimeout(function(){
            lazyRender()
        },300)
    })

    function lazyRender(){
        $('img').each(function(){
            if( checkShow($(this)) && !isLoaded($(this)) ){
                loadImg($(this))
            }
        })
    }
    function isLoaded($img){
        return $img.attr('src') === $img.attr('data-src')
    }

    function checkShow($img){
        var scroll = $(window).scrollTop();
        var windowHeight = $(window).height();
        var offsetTop = $img.offset().top;
        if(offsetTop < scroll + windowHeight  && offsetTop > scroll){
            return true
        }
        return false
    }
    function loadImg($img){
      if(checkShow($img))
        $img.attr('src',$img.attr('data-src'))
    }

    </script>

  </body>
</html>
